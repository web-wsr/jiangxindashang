<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>匠心大赏</title>
    <link rel="stylesheet" href="./css/reset.css">
    <link rel="stylesheet" href="./css/index.css">
</head>

<body>
    <header class="page-header">
        <div class="header-wrapper">
            <div class="header-container">
                <div class="header-logo">
                    <img class="logo-img" src="./img/logo.jpg" alt="">
                </div>
                <img class="banner-img" src="./img/banner-pic.png" alt="">
            </div>
        </div>
    </header>
    <div class="page-mainer">
        <img class="page-border-top" src="./img/mainer-border.png" alt="">
        <section class="activity-section">
            <div class="activity-container">
                <img class="activity-title-img" src="./img/h2-title-bg1.jpg" alt="">
                <h2 class="activity-title">致敬每一位合作布道师</h2>
                <p class="activity-subtitle">
                    三年磨一剑！极客学院历经三年的发展和探索，打造出了今天的在线职业教育新型大学。从1门
                    <br>
                    到3000课程，从100会员到300万会员，没有大家就没有这样的数字。在这里，向每一位做出的贡献布道师致敬。
                </p>
            </div>
        </section>
        <section class="nav-section">
            <img src="./img/nav-before-bg.png" alt="">
            <div class="nav-list-container">
                <ul class="nav-list">
                    <li class="nav-item">
                        申请加入<br>
                        布道师
                    </li>
                    <li class="nav-item">
                        课程<br>
                        布道师
                    </li>
                    <li class="nav-item">
                        实战<br>
                        布道师
                    </li>
                    <li class="nav-item" style="color: #CF000D;">
                        领取礼品<br>
                        人人有奖
                    </li>
                    <img class="nav-after-img" src="./img/nav-after-bg.png" alt="">
                </ul>
            </div>
        </section>
        <section class="course-section">
            <div class="course-wrapper">
                <div class="course-header">
                    <img class="course-header-logo" src="./img/h2-title-bg2.png" alt="">
                    <p class="course-header-title">
                        16年秋，立体类学习产品——职业学院正式上线，精心雕琢、时上时新、
                        <br>
                        走在技术前沿的课程广受好评，三个月内招生万人。感谢匠心布道师（课
                        <br>
                        程反响最热烈）、桃李布道师（学习人数最多）、励耘布道师（上线课程
                        <br>
                        最多）及所有课程布道师。
                    </p>
                    <img class="course-header-img" src="./img/card-jiuye2.png" alt="">
                </div>
                <div class="course-mainer">
                    <div class="course-teachers">
                        <div class="course-teachers-header">
                            <img src="./img/h3-title-bg1.png" alt="">
                            <div class="course-teachers-title">
                                <h1 class="teachers-title-name">匠心布道师</h1>
                                <p class="teachers-title-info">初心在方寸，咫尺在匠心</p>
                            </div>
                        </div>
                        <div class="course-teachers-mainer">
                            <ul class="course-teachers-list">
                                <li class="course-teachers-item">
                                    <img src="./img/teacher_avatar_6.png" alt="">
                                    <p class="teachers-item-name">莫无忌</p>
                                    <p class="teachers-item-description">
                                        Android专家顾问，台湾Android论坛主席，现任亚太地区Android技术大会主席，台湾Android领域框架开发。
                                    </p>
                                </li>
                                <li class="course-java-item">
                                    <img src="./img/lesson-rxjava.jpg" alt="">
                                </li>
                                <li class="course-teachers-item">
                                    <img src="./img/teacher_avatar_6.png" alt="">
                                    <p class="teachers-item-name">莫无忌</p>
                                    <p class="teachers-item-description">
                                        Android专家顾问，台湾Android论坛主席，现任亚太地区Android技术大会主席，台湾Android领域框架开发。
                                    </p>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="course-teachers">
                        <div class="course-teachers-header">
                            <img src="./img/h3-title-bg2.png" alt="">
                            <div class="course-teachers-title">
                                <h1 class="teachers-title-name">桃李布道师</h1>
                                <p class="teachers-title-info">因君树桃李，此地忽芬芳</p>
                            </div>
                        </div>
                        <div class="course-teachers-mainer">
                            <ul class="course-teachers-list">
                                <li class="course-teachers-item">
                                    <img src="./img/teacher_avatar_6.png" alt="">
                                    <p class="teachers-item-name">莫无忌</p>
                                    <p class="teachers-item-description">
                                        Android专家顾问，台湾Android论坛主席，现任亚太地区Android技术大会主席，台湾Android领域框架开发。
                                    </p>
                                </li>
                                <li class="course-teachers-item" style="margin: 0 31px;">
                                    <img src="./img/teacher_avatar_6.png" alt="">
                                    <p class="teachers-item-name">莫无忌</p>
                                    <p class="teachers-item-description">
                                        Android专家顾问，台湾Android论坛主席，现任亚太地区Android技术大会主席，台湾Android领域框架开发。
                                    </p>
                                </li>
                                <li class="course-teachers-item">
                                    <img src="./img/teacher_avatar_5.png" alt="">
                                    <p class="teachers-item-name">莫无忌</p>
                                    <p class="teachers-item-description">
                                        Android专家顾问，台湾Android论坛主席，现任亚太地区Android技术大会主席，台湾Android领域框架开发。
                                    </p>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="course-teachers">
                        <div class="course-teachers-header">
                            <img src="./img/h3-title-bg1.png" alt="">
                            <div class="course-teachers-title">
                                <h1 class="teachers-title-name">励耘布道师</h1>
                                <p class="teachers-title-info">循躬思励己，耘草辟墁垆</p>
                            </div>
                        </div>
                        <div class="course-teachers-mainer">
                            <ul class="course-teachers-list">
                                <li class="course-java-item" style="margin: 0;">
                                    <img src="./img/lesson-wenda.jpg" alt="">
                                </li>
                                <li class="course-teachers-item" style="margin: 0 31px;">
                                    <img src="./img/teacher_avatar_6.png" alt="">
                                    <p class="teachers-item-name">莫无忌</p>
                                    <p class="teachers-item-description">
                                        Android专家顾问，台湾Android论坛主席，现任亚太地区Android技术大会主席，台湾Android领域框架开发。
                                    </p>
                                </li>
                                <li class="course-teachers-item">
                                    <img src="./img/teacher_avatar_5.png" alt="">
                                    <p class="teachers-item-name">莫无忌</p>
                                    <p class="teachers-item-description">
                                        Android专家顾问，台湾Android论坛主席，现任亚太地区Android技术大会主席，台湾Android领域框架开发。
                                    </p>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <img src="./img/cborder.png" alt="" style="margin-bottom: 31px;">
                    <div class="course-header">
                        <img class="course-header-logo" src="./img/h2-title-bg3.png" alt="">
                        <p class="course-header-title">
                            15年夏，上线的项目实战指导服务已走过一年半的时光，实战布道师们的
                            <br>
                            指导与视频课程学习相辅相成，使学习更加高效。感谢风云布道师（学员
                            <br>
                            评价最好）、杏坛布道师（指导学员次数最多）、春蚕布道师（回答学员
                            <br>
                            提问最多）及所有实战布道师。
                        </p>
                        <img class="course-header-img" src="./img/card-zhiye2.png" alt="">
                    </div>
                    <div class="course-teachers">
                        <div class="course-teachers-header">
                            <img src="./img/h3-title-bg4.png" alt="">
                            <div class="course-teachers-title">
                                <h1 class="teachers-title-name">风云布道师</h1>
                                <p class="teachers-title-info">一顾重风云,三冬足文史</p>
                            </div>
                        </div>
                        <div class="course-teachers-mainer">
                            <ul class="course-teachers-list">
                                <li class="course-teachers-item">
                                    <img src="./img/teacher_avatar_6.png" alt="">
                                    <p class="teachers-item-name">莫无忌</p>
                                    <p class="teachers-item-description">
                                        Android专家顾问，台湾Android论坛主席，现任亚太地区Android技术大会主席，台湾Android领域框架开发。
                                    </p>
                                </li>
                                <li class="course-teachers-item" style="margin: 0 31px;">
                                    <img src="./img/teacher_avatar_6.png" alt="">
                                    <p class="teachers-item-name">莫无忌</p>
                                    <p class="teachers-item-description">
                                        Android专家顾问，台湾Android论坛主席，现任亚太地区Android技术大会主席，台湾Android领域框架开发。
                                    </p>
                                </li>
                                <li class="course-teachers-item">
                                    <img src="./img/teacher_avatar_6.png" alt="">
                                    <p class="teachers-item-name">莫无忌</p>
                                    <p class="teachers-item-description">
                                        Android专家顾问，台湾Android论坛主席，现任亚太地区Android技术大会主席，台湾Android领域框架开发。
                                    </p>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="course-teachers">
                        <div class="course-teachers-header">
                            <img src="./img/h3-title-bg5.png" alt="">
                            <div class="course-teachers-title">
                                <h1 class="teachers-title-name">杏坛布道师</h1>
                                <p class="teachers-title-info">槐影覆杏坛，子弟尽高官</p>
                            </div>
                        </div>
                        <div class="course-teachers-mainer">
                            <ul class="course-teachers-list">
                                <li class="course-teachers-item">
                                    <img src="./img/teacher_avatar_6.png" alt="">
                                    <p class="teachers-item-name">莫无忌</p>
                                    <p class="teachers-item-description">
                                        Android专家顾问，台湾Android论坛主席，现任亚太地区Android技术大会主席，台湾Android领域框架开发。
                                    </p>
                                </li>
                                <li class="course-teachers-item" style="margin: 0 31px;">
                                    <img src="./img/teacher_avatar_6.png" alt="">
                                    <p class="teachers-item-name">莫无忌</p>
                                    <p class="teachers-item-description">
                                        Android专家顾问，台湾Android论坛主席，现任亚太地区Android技术大会主席，台湾Android领域框架开发。
                                    </p>
                                </li>
                                <li class="course-teachers-item">
                                    <img src="./img/teacher_avatar_5.png" alt="">
                                    <p class="teachers-item-name">莫无忌</p>
                                    <p class="teachers-item-description">
                                        Android专家顾问，台湾Android论坛主席，现任亚太地区Android技术大会主席，台湾Android领域框架开发。
                                    </p>
                                </li>
                            </ul>
                        </div>
                    </div>
                    <div class="course-teachers" style="margin: 0;">
                        <div class="course-teachers-header">
                            <img src="./img/h3-title-bg6.png" alt="">
                            <div class="course-teachers-title">
                                <h1 class="teachers-title-name">春蚕布道师</h1>
                                <p class="teachers-title-info">春蚕归乐茧，蜡炬有余光</p>
                            </div>
                        </div>
                        <div class="course-teachers-mainer">
                            <ul class="course-teachers-list">
                                <li class="course-teachers-item">
                                    <img src="./img/teacher_avatar_6.png" alt="">
                                    <p class="teachers-item-name">莫无忌</p>
                                    <p class="teachers-item-description">
                                        Android专家顾问，台湾Android论坛主席，现任亚太地区Android技术大会主席，台湾Android领域框架开发。
                                    </p>
                                </li>
                                <li class="course-teachers-item" style="margin: 0 31px;">
                                    <img src="./img/teacher_avatar_6.png" alt="">
                                    <p class="teachers-item-name">莫无忌</p>
                                    <p class="teachers-item-description">
                                        Android专家顾问，台湾Android论坛主席，现任亚太地区Android技术大会主席，台湾Android领域框架开发。
                                    </p>
                                </li>
                                <li class="course-teachers-item">
                                    <img src="./img/teacher_avatar_5.png" alt="">
                                    <p class="teachers-item-name">莫无忌</p>
                                    <p class="teachers-item-description">
                                        Android专家顾问，台湾Android论坛主席，现任亚太地区Android技术大会主席，台湾Android领域框架开发。
                                    </p>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="course-footer">
                    <p class="course-footer-info">
                        更多的获奖信息和礼品，客服
                        <br>
                        将联系布道师本人发放
                    </p>
                </div>
            </div>
        </section>
        <section class="message-section">
            <div class="message-container">
                <img class="message-title-img" src="./img/cloud.png" alt="">
                <h1 class="message-title">寄语赋佳期，好礼相赠送</h1>
                <div class="message-activity">
                    <div class="message-activity-info">
                        <p class="message-activity-txt">#布道师祝福# To耿昌宇老师，看完老师做的课程，真心
                            <br>
                            佩服啊。很巧妙的利用数据绑定、计算属性、indexOf判
                            <br>
                            断来显示隐藏元素，学到很多！希望后续能学到老师更多
                            <br>
                            课程，老师辛苦啦，新年快乐！
                        </p>
                        <p class="message-activity-time">活动时间: 活动时间截止1月20日9：00，所有用户可发送寄语</p>
                        <div class="message-activity-rule">
                            <p class="activity-rule-title">活动规则: </p>
                            <ul class="activity-rule-list">
                                <li class="activity-rule-item">1.每天选择3条精华祝福＋2条随机祝福，赠送年VIP或 U型枕（每个ID仅限一次领奖）</li>
                                <li class="activity-rule-item">2.所有送出寄语的用户，可获得课程优惠券一张（面值 不等，联系客服领取）。</li>
                                <li class="activity-rule-item">3.此活动限登录用户参与，非登录用户默认放弃礼品。</li>
                            </ul>
                        </div>
                    </div>
                    <div class="message-activity-img">
                        <img src="./img/prize_03.jpg" alt="">
                        <p class="message-activity-prize">恭喜xiaobao032获得 U型枕</p>
                    </div>
                </div>
            </div>
            <div class="massage-send">
                <div class="massage-send-wrapper">
                    <textarea class="massage-textarea" id="tx" rows="5" cols="50" name="" id=""
                        placeholder="#布道师祝福#"></textarea>
                    <img class="textarea-bg1" src="./img/textarea_bg_1.png" alt="">
                    <img class="textarea-bg2" src="./img/textarea_bg_2.png" alt="">
                </div>
                <button class="massage-btn">
                    发送祝福
                    <br>
                    赢取礼品
                </button>
            </div>
            <div class="massage-box" id="card-list">
                <div class="massage-item" style="z-index: 0;">
                    <img class="message-bg-left" src="./img/message_bg_left.png" alt="">
                    <img class="message-bg-right" src="./img/message_bg_right.png" alt="">
                    <div class="massage-item-title">小兔兔说：</div>
                    <div class="massage-item-content">耿昌宇老师，我是7月5日购买课程的学员，还有一个视频就全部学完了。你的课程简单易学非常感谢，恰逢新年来临送上我的祝福！</div>
                </div>
            </div>
        </section>
        <img class="page-border-bottom" src="./img/mainer-border.png" alt="">
    </div>
    <footer class="page-footer">
        <div class="footer-container">
            <p class="footer-title">2017已经到来，祝极客学院各位朋友新的一年大放异彩.</p>
            <p class="footer-subtitle">本次活动解释权归极客学院所有，如有任何疑问请联系：g_zuoyepigai@jikexueyuan.com</p>
        </div>
    </footer>
    <script>
        let textArea = document.querySelector('#tx')
        let btn = document.querySelector('button')
        // 取出本地数组
        // let arr = localStorage.getItem('chartList')
        // 判断一下arr 里面有没有值 有就返回 ，没有就返回空数组
        // arr = arr ? JSON.parse(arr) : []
        let chartList = []
        btn.addEventListener('click', function () {
            let value = textArea.value.trim()
            if (!value) {
                return
            }
            chartList.push(
                {
                    value: value
                }
            )
            PAGE.setDefaultData()
            // 存一份到本地
            // localStorage.setItem('chartList', JSON.stringify(chartList))
            chartList.pop()
            textArea.value = '';
        })
        // 构建单例对象
        let backgroundColors = ['#F3F4DF', '#D5D6EA', '#DBEAD5', '#F0F5FF']
        const PAGE = {
            data: {
                backgroundColors: backgroundColors,
                defaultDatas: chartList,
                itemWidth: 320,
                itemHeight: 158,
                paddingOffset: 10,
                zIndex: 0,
                itemOffsetTop: null,
                itemOffsetLeft: null,
                pageX: null,
                pageY: null,
                isLock: true,
            },
            init: function () {
                // 调用PAGE.setDefaultData 
                this.setDefaultData()
                this.bind()
            },
            bind: function () {
                // 1. 在 PAGE.bind 中委托 card-list 绑定点击 card-item 触发 PAGE.handleMouseDown
                let cartList = document.getElementById('card-list');
                this.onEventLister(cartList, 'mousedown', 'massage-item', this.handleMouseDown);
                // 2. 为 window 绑定鼠标移动事件触发 PAGE.handleMouseMove
                window.addEventListener('mousemove', this.handleMouseMove);
                // 3. 为 window 绑定鼠标回弹触发 PAGE.handleMouseMove
                window.addEventListener('mouseup', this.handleMouseUp);

            },
            // 添加PAGE.onEventLister 委托绑定方法
            onEventLister: function (parentNode, action, childClassName, callback) {
                parentNode.addEventListener(action, function (e) {
                    e.target.className.indexOf(childClassName) >= 0 && callback(e);
                })
            },
            // 1. 添加 PAGE.handleMouseDown 方法
            handleMouseDown: function (e) {
                // 2. 获取当前点击的元素，为其层级设置到当前最高
                let item = e.target;
                item.style.zIndex = ++PAGE.data.zIndex;
                // 3. 获取当前元素内容距离容器顶部、左部的偏移量、以及鼠标点击的XY坐标轴数据
                // 存储到 PAGE.data 中
                PAGE.data.itemOffsetTop = item.offsetTop;
                PAGE.data.itemOffsetLeft = item.offsetLeft;
                PAGE.data.pageX = e.pageX;
                PAGE.data.pageY = e.pageY;
                // 4. 存储当前点击元素
                PAGE.data.item = item;
                // 5. 开锁
                PAGE.data.isLock = false;
            },
            // 1. 定义 PAGE.handleMouseMove 当鼠标移动触发的事件
            handleMouseMove: function (e) {
                // 2. 如果当前锁为开的状态执行以下代码
                if (!PAGE.data.isLock) {
                    // 3. 获取容器、卡片项目的宽高和距离容器边缘的偏移量计算出最大值
                    let cardList = document.getElementById('card-list');
                    let containerWidth = cardList.offsetWidth;
                    let containerHeight = cardList.offsetHeight;
                    let itemWidth = PAGE.data.itemWidth;
                    let itemHeight = PAGE.data.itemHeight;
                    let paddingOffset = PAGE.data.paddingOffset;
                    // 4. 根据当前鼠标坐标于存储鼠标坐标对比计算出偏移量计算出卡片的距离边缘偏移量
                    let maxWidth = containerWidth - itemWidth - paddingOffset;
                    let maxHeight = containerHeight - itemHeight - paddingOffset;
                    let translateX = e.pageX - PAGE.data.pageX + PAGE.data.itemOffsetLeft;
                    let translateY = e.pageY - PAGE.data.pageY + PAGE.data.itemOffsetTop;
                    // 5. 设置偏移量的最大和最小值，最大不超过最大值，最少不少于边缘值。
                    translateX = translateX > maxWidth ? maxWidth : translateX;
                    translateY = translateY > maxHeight ? maxHeight : translateY;
                    translateX = translateX < paddingOffset ? paddingOffset : translateX;
                    translateY = translateY < paddingOffset ? paddingOffset : translateY;
                    // 6. 为存储的元素设置偏移值
                    PAGE.data.item.style.left = translateX + 'px';
                    PAGE.data.item.style.top = translateY + 'px';
                }
            },
            // 1. 定义 PAGE.handleMouseUp 当鼠标回弹触发的事件
            handleMouseUp: function () {
                // 2. 设置关锁，这样鼠标移动时候的事件就不会触发了
                PAGE.data.isLock = true
            },
            // 创建PAGE.setDefaultData 方法 设置所有留言卡片 
            setDefaultData: function () {
                PAGE.data.defaultDatas.forEach(data => PAGE.addCart(data.value))
            },
            // 创建PAGE.addCart方法
            addCart: function (value) {
                // 在PAGE.addCart中 获取card-list 容器的高度和宽度
                let cardList = document.getElementById('card-list')
                // console.log(cardList);
                let containerWidth = cardList.offsetWidth
                console.log(containerWidth);
                // console.log(containerWidth);
                let containerHeight = cardList.offsetHeight
                console.log(containerHeight);
                // 从PAGE.data中获取留言卡片的宽度 高度 距离边框的距离值
                let itemWidth = PAGE.data.itemWidth
                let itemHeight = PAGE.data.itemHeight
                let paddingOffset = PAGE.data.paddingOffset
                //  根据容器、项目、距边框距离计算出卡片距离顶部以及左部的最大偏移值
                let maxWidth = containerWidth - itemWidth - paddingOffset
                let maxHeight = containerHeight - itemHeight - paddingOffset
                console.log(maxHeight);
                // 调用PAGE.randomBetween 获取距离容器边缘顶部、左部偏移值的随机数
                let randomTop = PAGE.randomBetween(paddingOffset, maxHeight)
                let randomLeft = PAGE.randomBetween(paddingOffset, maxWidth)
                console.log(randomTop);
                console.log(randomLeft);
                // 设置 PAGE.data.zIndex 增加一级，并获取增加后的值
                let zIndex = ++PAGE.data.zIndex;
                // 根据 zIndex 除余按顺序获取背景色的值
                let backgroundColors = PAGE.data.backgroundColors;
                let backgroundColor = backgroundColors[zIndex % backgroundColors.length];
                // 创建卡片元素 massage-item ,设置calssName及样式属性
                let massageItem = document.createElement('div');
                let massageItemTitle = document.createElement('div');
                let massageItemContent = document.createElement('div');
                let messageBgLeft = document.createElement('img')
                let messageBgRight = document.createElement('img')
                messageBgLeft.setAttribute('class', 'message-bg-left');
                messageBgRight.setAttribute('class', 'message-bg-right');
                massageItem.setAttribute('class', 'massage-item');
                massageItemTitle.setAttribute('class', 'massage-item-title');
                massageItemContent.setAttribute('class', 'massage-item-content');
                messageBgLeft.setAttribute('src', './img/message_bg_left.png')
                messageBgRight.setAttribute('src', './img/message_bg_right.png')
                massageItemTitle.innerText = '小兔兔说：';
                massageItemContent.innerText = value;
                let styleStr = `
                z-index:${zIndex};
                background:${backgroundColor};
                top:${randomTop}px;
                left:${randomLeft}px;`
                massageItem.setAttribute('style', styleStr)
                // 把新建的元素依次推入容器cardList
                massageItem.appendChild(messageBgLeft)
                massageItem.appendChild(messageBgRight)
                massageItem.appendChild(massageItemTitle)
                massageItem.appendChild(massageItemContent)
                cardList.appendChild(massageItem)
            },
            // 创建PAGE.randomBetween方法  公式Math.random() * (max - min) + min
            randomBetween: function (min, max) {
                return Math.floor(Math.random() * (max - min) + min)
            },
        }
        PAGE.init();
    </script>
</body>

</html>